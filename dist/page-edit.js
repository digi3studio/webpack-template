!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=17)}([function(e,t){e.exports=React},function(e,t,n){"use strict";function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return c}),n.d(t,"b",function(){return f});var i=n(0),s=n.n(i),u=n(14),p=(n.n(u),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=function e(){o(this,e)};c.TEXT="text",c.NUMBER="number",c.DATE="date",c.DATE_RANGE="daterange",c.LINK="link",c.ADMIN_COMMENT="admincomment",c.ENUM="enum",c.FILE="file",c.GROUP="group",c.BOOLEAN="boolean",c.DISABLE="disable",c.STYLE_SELECT="styleselect";var f=function(){function e(){o(this,e)}return l(e,null,[{key:"renderField",value:function(e,t,n,a,r){var o=e+t.id,i={key:o,prefix:e,id:t.id,label:t.name,option:t.option,onChange:r};switch(t.type){case c.ADMIN_COMMENT:return s.a.createElement(m,p({},i,{label:t.option}));case c.DISABLE:return s.a.createElement(N,i);case c.TEXT:return s.a.createElement(d,p({},i,{value:n[o],masterValue:a[o]}));case c.NUMBER:var u={};if(/-/.test(t.option)){var l=t.option.split("-");u.min=l[0],u.max=l[1]}return s.a.createElement(g,p({},i,{value:n[o],masterValue:a[o],type:"number"},u));case c.DATE:return s.a.createElement(g,p({},i,{value:n[o],masterValue:a[o],type:"date"}));case c.LINK:return s.a.createElement(y,p({},i,{value:["",n[o+"_1"],n[o+"_2"]],masterValue:["",a[o+"_1"],a[o+"_2"]]}));case c.ENUM:return s.a.createElement(_,p({},i,{value:n[o],masterValue:a[o]}));case c.FILE:switch(t.option){case"image":return s.a.createElement(b,p({},i,{value:[n[o],n[o+"_1"],n[o+"_2"]],masterValue:[a[o],a[o+"_1"],a[o+"_2"]]}));default:return s.a.createElement(v,p({},i,{value:n[o],masterValue:a[o]}))}case c.BOOLEAN:return s.a.createElement(w,p({},i,{value:n[o],masterValue:a[o]}));case c.GROUP:return s.a.createElement(O,p({},i,{values:n,masterValues:a}));default:return s.a.createElement(E,i)}}}]),e}(),h=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onValueChange=n.onValueChange.bind(n);var r=""+n.props.prefix+n.props.id;return n.state={key:r,label:s.a.createElement("div",{className:"ui label"},n.props.label.replace("_"," "))},n}return r(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e,t){return!e.value||e.value!==this.props.value}},{key:"onValueChange",value:function(e){this.props.onChange(e.target.name,e.target.value)}},{key:"getPlaceHolder",value:function(e,t){return""==e?t:e||t}}]),t}(s.a.Component),m=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){var e=this.props.label.replace(/---/g,"");return s.a.createElement("div",{className:"input-"+c.ADMIN_COMMENT},s.a.createElement("h4",{className:"ui horizontal divider"},e))}}]),t}(s.a.Component),d=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){var e=parseInt(this.props.option),t=this.getPlaceHolder(this.props.masterValue,""),n=e>64||e<=0?s.a.createElement("textarea",{onChange:this.onValueChange,name:this.state.key,value:this.props.value||"",placeholder:t}):s.a.createElement("input",{onChange:this.onValueChange,type:"text",name:this.state.key,value:this.props.value||"",placeholder:t});return s.a.createElement("li",{className:"input-"+c.TEXT},s.a.createElement("div",{className:"ui fluid labeled input"},this.state.label,n))}}]),t}(h),g=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){var e=this.getPlaceHolder(this.props.masterValue,""),t=Object.assign({},this.props);return delete t.masterValue,delete t.option,s.a.createElement("li",{className:"input-"+this.props.htmlType},s.a.createElement("div",{className:"ui fluid labeled input"},this.state.label,s.a.createElement("input",p({},t,{onChange:this.onValueChange,name:this.state.key,value:this.props.value||"",placeholder:e}))))}}]),t}(h),y=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){var e=this.getPlaceHolder(this.props.masterValue[1],"Label"),t=this.getPlaceHolder(this.props.masterValue[2],"http://");return s.a.createElement("li",{className:"input-"+c.LINK},s.a.createElement("div",{className:"ui fluid labeled icon input"},this.state.label,s.a.createElement("span",{className:"ui left icon input"},s.a.createElement("i",{className:"font icon"}),s.a.createElement("input",{type:"text",onChange:this.onValueChange,name:this.state.key+"_1",value:this.props.value[1]||"",placeholder:e})),s.a.createElement("span",{className:"ui left icon input"},s.a.createElement("i",{className:"linkify icon"}),s.a.createElement("input",{type:"text",onChange:this.onValueChange,name:this.state.key+"_2",value:this.props.value[2]||"",placeholder:t}))))}}]),t}(h),v=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){var e=this.getPlaceHolder(this.props.masterValue,"Label");return s.a.createElement("li",{className:"input-"+c.FILE},s.a.createElement("div",{className:"ui fluid labeled input"},this.state.label,s.a.createElement("input",{type:"text",onChange:this.onValueChange,name:this.state.key,value:this.state.value||"",placeholder:e}),s.a.createElement("input",{type:"file"})))}}]),t}(h),b=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){var e=this.getPlaceHolder(this.props.masterValue[0],"Label"),t=this.getPlaceHolder(this.props.masterValue[1],"alt"),n=this.getPlaceHolder(this.props.masterValue[2],"crop"),a=null==this.props.value[0]||""==this.props.value[0]?s.a.createElement("span",{className:"ui input file"},s.a.createElement("input",{type:"file"})):s.a.createElement("span",null,s.a.createElement("div",{className:"ui input left icon"},s.a.createElement("i",{className:"icon file image outline"}),s.a.createElement("input",{type:"text",onChange:this.onValueChange,name:this.state.key,value:this.props.value[0]||"",placeholder:e})),s.a.createElement("div",{className:"ui input"},s.a.createElement("input",{type:"text",onChange:this.onValueChange,name:this.state.key+"_1",value:this.props.value[1]||"",placeholder:t})),s.a.createElement("div",{className:"ui input"},s.a.createElement("input",{type:"text",onChange:this.onValueChange,name:this.state.key+"_2",value:this.props.value[2]||"",placeholder:n})));return s.a.createElement("li",{className:"input-"+c.FILE},s.a.createElement("div",{className:"ui labeled input"},this.state.label),a)}}]),t}(h),_=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refreshDropdown=n.refreshDropdown.bind(n),n}return r(t,e),l(t,[{key:"refreshDropdown",value:function(){var e=this;$("#ui-dropdown-"+this.state.key).dropdown({onChange:function(t,n,a){e.props.onChange($(this).attr("name"),t)}})}},{key:"componentDidMount",value:function(){this.refreshDropdown()}},{key:"componentDidUpdate",value:function(){this.refreshDropdown()}},{key:"render",value:function(){var e=this.props.option.split(",").map(function(e){if(/\:/.test(e)){var t=e.split(":");return s.a.createElement("div",{className:"item","data-value":t[0],key:e},t[1])}return s.a.createElement("div",{className:"item","data-value":e,key:e},e)});return s.a.createElement("li",{className:"input-"+c.ENUM},s.a.createElement("div",{id:"ui-dropdown-"+this.state.key,className:"ui selection dropdown",name:this.state.key},s.a.createElement("input",{type:"hidden",name:this.state.key,value:this.props.value}),s.a.createElement("i",{className:"dropdown icon"}),s.a.createElement("div",{className:"default text"},this.props.label),s.a.createElement("div",{className:"menu"},e)))}}]),t}(h),E=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){return s.a.createElement("li",{className:"input-unknown"},s.a.createElement("div",null,"not implement : ",this.props.type))}}]),t}(h),O=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"render",value:function(){var e=this,t=this.props.masterValues["count"+this.props.id]||1;t=parseInt(t);for(var a=[],r=0;r<t;r++)!function(t){var r=e.props.id+"("+t+")",o=n.i(u.fromJS)(e.props.option),i=o.map(function(e){return e.set("id",r+"_"+e.get("id")).toJSON()}),p=i.map(function(t){return f.renderField(e.props.prefix,t,e.props.values,e.props.masterValues,e.props.onChange)});a[t]=s.a.createElement("li",{key:"group"+t,draggable:"true",className:"wide"},s.a.createElement("div",{className:"ui segment"},s.a.createElement("div",{className:"ui top left attached label theme"},e.state.key+"("+t+")"),s.a.createElement("ul",{className:"box"},p)))}(r);return s.a.createElement("li",{className:"input-"+c.GROUP},s.a.createElement("div",{className:"ui segment"},s.a.createElement("div",{className:"ui ribbon label teal"},this.props.label),s.a.createElement("div",{className:"ui input labeled"},s.a.createElement("div",{className:"ui label"},"count:"),s.a.createElement("input",{type:"number",name:"count"+this.props.id,min:"1",value:this.props.masterValues["count"+this.props.id]||1,onChange:this.onValueChange})),s.a.createElement("ul",{className:"box"},a)))}}]),t}(h),w=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"ui checkbox"},s.a.createElement("input",{id:this.state.key,name:this.state.key,type:"checkbox",checked:1==this.props.value,onChange:function(t){return e.props.onChange(e.state.key,t.target.checked?"1":"0")}}),s.a.createElement("label",{htmlFor:this.state.key},this.props.label))}}]),t}(h),N=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){return null}}]),t}(s.a.Component)},function(e,t){e.exports=ReactRedux},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n.n(r),i=n(15),s=n.n(i),u=n(7),p=n(13),l=n(2),c=(n.n(l),n(16)),f=(n.n(c),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),h=function(){function e(){a(this,e);var t=this.getDefaultState();this.store=n.i(c.createStore)(n.i(p.a)(t)),this.render()}return f(e,[{key:"getDefaultState",value:function(){return Object.assign({},{campaign_name:"",campaign_shortname:"",campaign_id:"",session_id:"",languages:["en","tc"],masterLanguage:"en",editingLanguage:"en",city:"",page:{id:null,name:"",shortname:"",publish_start_date:"",publish_end_date:"",parent_id:"",order:1,hide:!1,member:!1,share:!0,pagetype_id:"1",layout_id:"0"},properties:{},fields:{en:{}},pagetype:[]},window.__PRELOADED_STATE__||{})}},{key:"render",value:function(){s.a.render(o.a.createElement(l.Provider,{store:this.store},o.a.createElement(u.a,null)),document.getElementById("root"))}}]),e}();t.default=h,new h},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"debugger"},JSON.stringify(this.props.state))}}]),t}(s.a.Component);t.a=p},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isLoading:!1,urlBase:document.body.getAttribute("data-base")},n.onSubmit=n.onSubmit.bind(n),n.onResult=n.onResult.bind(n),n.post=n.post.bind(n),n}return o(t,e),u(t,[{key:"onSubmit",value:function(e){e.preventDefault();var t=new FormData(e.target);this.post(t)}},{key:"post",value:function(e,t){var n=this;this.setState({isLoading:!0}),fetch(this.state.urlBase+(t||this.props.action||this.state.action)+".json",{credentials:"same-origin",method:"post",body:e}).then(function(e){return e.json()}).then(function(e){n.setState({isLoading:!1}),n.onResult(e)})}},{key:"onResult",value:function(e){var t=this;this.setState({error:null,isLoading:!1}),"success"===e.status?null!==this.props.onResultSuccess&&this.props.onResultSuccess(e):(null!==this.props.onResultError&&this.props.onResultError(e),this.setState({error:e.code+e.info.message}),clearTimeout(this.iid),this.iid=setTimeout(function(){t.setState({error:""})},4e3))}}]),t}(s.a.Component);t.a=p},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=n(5),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSave=n.onSave.bind(n),n.preview=n.preview.bind(n),n}return o(t,e),p(t,[{key:"createPostData",value:function(){var e=new FormData,t={page_values:this.props.settings,field_values:this.props.fields,page_ext_values:this.props.properties};this.props.settings,e.append("source",JSON.stringify(t)),e.append("campaign",this.props.campaignId);for(var n in t.page_values)"pagetype_id"!==n&&"layout_id"!==n&&e.append(n,t.page_values[n]);return e.append("pagetype_id",this.props.settings.pagetype_id),e.append("layout_id",this.props.settings.layout_id),e.append("editing_language",this.props.editingLanguage),e}},{key:"onSave",value:function(){this.post(this.createPostData())}},{key:"preview",value:function(){var e=this,t="page/admin_preview"+(""===this.props.settings.id?"":"/"+this.props.settings.id);this.setState({isLoading:!0}),fetch(this.state.urlBase+t,{credentials:"same-origin",method:"post",body:this.createPostData()}).then(function(e){return e.text()}).then(function(t){e.setState({isLoading:!1}),e.props.onPreviewRender(t)})}},{key:"render",value:function(){var e="ui button"+(this.state.isLoading?" loading":"");return s.a.createElement("div",{id:"page-controls"},s.a.createElement("button",{className:e+" grey",onClick:this.preview},"Preview"),s.a.createElement("button",{className:e+" black",onClick:this.onSave},"Save"))}}]),t}(u.a);t.a=l},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=n(2),p=(n.n(u),n(9)),l=n(12),c=n(11),f=n(8),h=n(6),m=n(10),d=n(4),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),y=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={previewSource:""},n.onPreviewRender=n.onPreviewRender.bind(n),n}return o(t,e),g(t,[{key:"onPreviewRender",value:function(e){this.setState({previewSource:e})}},{key:"render",value:function(){for(var e=void 0,t=void 0,n=0;n<this.props.pagetype.length;n++){var a=this.props.pagetype[n];if(a.id===this.props.page.pagetype_id){e=a.properties,t=a.fields;break}}var r=Object.assign({},this.props.fields[this.props.editingLanguage]),o=Object.assign({},this.props.fields[this.props.masterLanguage]);return s.a.createElement("div",null,s.a.createElement("div",{className:"ui form"},s.a.createElement("div",{className:"ui segment inverted theme"},s.a.createElement("h1",null,this.props.campaignName),s.a.createElement("div",null,this.props.city+"_"+this.props.editingLanguage+"/"+this.props.campaignShortName+"/"+this.props.page.shortname)),s.a.createElement("div",{id:"page-content",className:"column"},s.a.createElement(c.a,{languages:this.props.languages,master:this.props.masterLanguage,current:this.props.editingLanguage,onChange:this.props.onLanguageChange}),s.a.createElement(f.a,{scheme:t||this.props.pagetype[0].fields,values:r,masterValues:o,prefix:"field",onChange:this.props.onInputChange}),s.a.createElement(h.a,{campaignId:this.props.campaignId,sessionId:this.props.sessionId,settings:this.props.page,fields:this.props.fields,properties:this.props.properties,onResultSuccess:this.props.onSaveSuccess,onResultError:this.props.onSaveError,onPreviewRender:this.onPreviewRender,editingLanguage:this.props.editingLanguage,action:"admin/page/save"+(""===this.props.page.id?"":"/"+this.props.page.id)})),s.a.createElement("div",{id:"page-setting",className:"column"},s.a.createElement("div",{className:"ui stacked segment inverted"},s.a.createElement(p.a,{campaignName:this.props.campaignName,page:this.props.page,onChange:this.props.onInputChange})),s.a.createElement("div",{className:"ui segment inverted"},s.a.createElement("h4",null,s.a.createElement("i",{className:"icon setting"}),"Page Style Settings"),s.a.createElement(l.a,{scheme:this.props.pagetype,selectedType:this.props.page.pagetype_id||1,selectedLayout:this.props.page.layout_id||0,onChange:this.props.onInputChange})),s.a.createElement("div",{className:"ui segment"},s.a.createElement("h4",null,s.a.createElement("i",{className:"icon setting"}),"Additional Settings"),s.a.createElement(f.a,{scheme:e,values:this.props.properties,prefix:"prop",onChange:this.props.onInputChange}),s.a.createElement("h4",null,"Debug: state"),s.a.createElement(d.a,{state:this.props.debug.fields})))),s.a.createElement(m.a,{source:this.state.previewSource}))}}]),t}(s.a.Component);t.a=n.i(u.connect)(function(e){return{hmr:e.hmr,campaignName:e.campaign_name,campaignId:e.campaign_id,campaignShortName:e.campaign_shortname,sessionId:e.session_id,languages:e.languages,masterLanguage:e.masterLanguage,editingLanguage:e.editingLanguage,pagetype:e.pagetype,page:e.page,properties:e.properties,fields:e.fields,city:e.city,debug:e}},function(e){return{onInputChange:function(t,n,a){switch(a){case"field":e({type:"CHANGE_FIELD_INPUT",payload:{name:t,value:n}});break;case"prop":e({type:"CHANGE_PROPERTIES_INPUT",payload:{name:t,value:n}});break;default:e({type:"CHANGE_PAGE_SETTING",payload:{name:t,value:n}})}},onLanguageChange:function(t){e({type:"CHANGE_EDITING_LANGUAGE",payload:t})},onSaveSuccess:function(t){e({type:"UPDATE_PAGE_ID",payload:t.page_id}),window.history.pushState({},"",t.url)},onSaveError:function(e){console.log(e)}}})(y)},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=n(1),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=n.onChange.bind(n),n}return o(t,e),p(t,[{key:"onChange",value:function(e,t){this.props.onChange(e,t,this.props.prefix)}},{key:"render",value:function(){var e=this,t=Object.assign({},this.props.values),n=this.props.masterValues||this.props.values,a=this.props.scheme&&this.props.scheme.map(function(a){return u.b.renderField(e.props.prefix,a,t,n,e.onChange)});return s.a.createElement("ul",{className:"box page-fields"},a)}}]),t}(s.a.Component);t.a=l},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=n(1),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=n.onChange.bind(n),n.scheme=[{id:"name",name:"Name",type:u.a.DISABLE,option:"64"},{id:"shortname",name:"URL",type:u.a.TEXT,option:"64"},{id:"parent_id",name:"Parent Page",type:u.a.DISABLE,option:"64"},{id:"publish_start_date",name:"Publish Date",type:u.a.DATE,option:""},{id:"publish_end_date",name:"Expire Date",type:u.a.DATE,option:""},{id:"hide",name:"Hide",type:u.a.BOOLEAN,option:""},{id:"share",name:"Allow Share",type:u.a.BOOLEAN,option:""},{id:"member",name:"Members Only",type:u.a.BOOLEAN,option:""}],n}return o(t,e),p(t,[{key:"onChange",value:function(e,t){this.props.onChange(e,t,"")}},{key:"render",value:function(){var e=this,t={name:this.props.page.name,shortname:this.props.page.shortname,parent_id:this.props.page.parent_id,publish_start_date:this.props.page.publish_start_date,publish_end_date:this.props.page.publish_end_date,hide:this.props.page.hide||0,share:this.props.page.share||1,member:this.props.page.member||0},n=this.scheme.map(function(n){return u.b.renderField("",n,t,t,e.onChange)});return s.a.createElement("div",{id:"page-info"},s.a.createElement("h3",null,s.a.createElement("i",{className:"icon setting"}),"Settings"),s.a.createElement("ul",{className:"box"},n),s.a.createElement("hr",null))}}]),t}(s.a.Component);t.a=l},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"render",value:function(){var e=this;return void 0===this.props.source||""===this.props.source?null:s.a.createElement("div",null,s.a.createElement("iframe",{id:"page-preview",ref:function(t){return t.contentWindow.document.write(e.props.source)}}))}}]),t}(s.a.Component);t.a=p},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"onClick",value:function(e){this.props.onChange(e)}},{key:"render",value:function(){var e=this,t=this.props.languages.map(function(t){var n=[];return t==e.props.master&&n.push("master"),t==e.props.current&&n.push("active"),s.a.createElement("li",{key:t,className:n.join(" "),onClick:function(){return e.onClick(t)}},t)});return s.a.createElement("div",{id:"translations"},s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"ui right pointing label inverted theme"},"Translations")),s.a.createElement("div",{className:"column"},s.a.createElement("ul",{className:"box"},t)))}}]),t}(s.a.Component);t.a=p},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=n(1),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=n.props.scheme.map(function(e){return e.id+":"+e.name});return n.scheme=[{id:"pagetype_id",name:"Type",type:u.a.ENUM,option:o.join(",")}],n.onChange=n.onChange.bind(n),n}return o(t,e),p(t,[{key:"onChange",value:function(e,t){""===t&&(t=0),this.props.onChange(e,t,"")}},{key:"render",value:function(){var e=this,t={pagetype_id:this.props.selectedType,layout_id:this.props.selectedLayout||0},n=this.scheme.map(function(n){return u.b.renderField("",n,t,t,e.onChange)}),a={};this.props.scheme.forEach(function(e){return a["type"+e.id]=parseInt(e.layout_count)});var r=a["type"+this.props.selectedType],o=r>1?s.a.createElement("div",{className:"ui input labeled"},s.a.createElement("div",{className:"ui label"},"Layout"),s.a.createElement("input",{type:"number",min:"0",max:r-1,value:this.props.selectedLayout,onChange:function(t){return e.onChange("layout_id",t.target.value)}})):null;return s.a.createElement("div",null,n,o)}}]),t}(s.a.Component);t.a=l},function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments[1];switch(n.type){case"HOT_RELOAD":return o({},t,{hmr:Math.random()});case"CHANGE_EDITING_LANGUAGE":return t.editingLanguage===n.pagetype?t:o({},t,{editingLanguage:n.payload});case"CHANGE_FIELD_INPUT":if((t.fields[t.editingLanguage]&&t.fields[t.editingLanguage][n.payload.name])===n.payload.value)return t;if(0===n.payload.name.indexOf("field")){var a=r(t,t.editingLanguage,n.payload.name,n.payload.value);return Object.assign({},t,a)}if(0===n.payload.name.indexOf("count")){var i=r(t,t.masterLanguage,n.payload.name,n.payload.value);return Object.assign({},t,i)}return t;case"CHANGE_PROPERTIES_INPUT":if(t.properties[n.payload.name]===n.payload.value)return t;var s=Object.assign({},t.properties);return s[n.payload.name]=n.payload.value,o({},t,{properties:s});case"CHANGE_PAGE_SETTING":if(t.page[n.payload.name]===n.payload.value)return t;var u=Object.assign({},t);return u.page[n.payload.name]=n.payload.value,u;case"UPDATE_PAGE_ID":return t.page.id===n.payload?t:o({},t,{page:o({},t.page,{id:n.payload})});default:return t}}}function r(e,t,n,a){var r=Object.assign({},e.fields[t]);r[n]=a;var o=Object.assign({},e.fields);return o[t]=r,{fields:o}}t.a=a;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}},function(e,t){e.exports=Immutable},function(e,t){e.exports=ReactDOM},function(e,t){e.exports=Redux},function(e,t,n){e.exports=n(3)}]);