!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=114)}([function(e,t){e.exports=React},function(e,t,n){var r=n(19),a="object"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function("return this")();e.exports=o},function(e,t,n){function r(e,t){var n=o(e,t);return a(n)?n:void 0}var a=n(61),o=n(72);e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return f}),n.d(t,"b",function(){return h});var i=n(0),s=n.n(i),u=n(30),c=(n.n(u),function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0}),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function e(){o(this,e)};f.TEXT="text",f.NUMBER="number",f.DATE="date",f.DATE_RANGE="daterange",f.LINK="link",f.ADMIN_COMMENT="admincomment",f.ENUM="enum",f.FILE="file",f.GROUP="group",f.BOOLEAN="boolean",f.DISABLE="disable",f.STYLE_SELECT="styleselect";var h=function(){function e(){o(this,e)}return p(e,null,[{key:"renderField",value:function(e,t,n,r,a){var o=e+t.id,i={key:o,prefix:e,id:t.id,label:t.name,option:t.option,onChange:a};switch(t.type){case f.ADMIN_COMMENT:return s.a.createElement(y,l({},i,{label:t.option}));case f.DISABLE:return s.a.createElement(x,i);case f.TEXT:return s.a.createElement(m,l({},i,{value:n[o],masterValue:r[o]}));case f.NUMBER:var u={};if(/-/.test(t.option)){var c=t.option.split("-");u.min=c[0],u.max=c[1]}return s.a.createElement(v,l({},i,{value:n[o],masterValue:r[o],type:"number"},u));case f.DATE:return s.a.createElement(v,l({},i,{value:n[o],masterValue:r[o],type:"date"}));case f.LINK:return s.a.createElement(b,l({},i,{value:["",n[o+"_1"],n[o+"_2"]],masterValue:["",r[o+"_1"],r[o+"_2"]]}));case f.ENUM:return s.a.createElement(E,l({},i,{value:n[o],masterValue:r[o]}));case f.FILE:switch(t.option){case"image":return s.a.createElement(_,l({},i,{value:[n[o],n[o+"_1"],n[o+"_2"]],masterValue:[r[o],r[o+"_1"],r[o+"_2"]]}));default:return s.a.createElement(g,l({},i,{value:[n[o],n[o+"_1"]],masterValue:[r[o],r[o+"_1"]]}))}case f.BOOLEAN:return s.a.createElement(j,l({},i,{value:n[o],masterValue:r[o]}));case f.GROUP:return s.a.createElement(w,l({},i,{values:n,masterValues:r}));default:return s.a.createElement(O,i)}}}]),e}(),d=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onValueChange=n.onValueChange.bind(n);var a=""+n.props.prefix+n.props.id;return n.state={key:a,label:s.a.createElement("div",{className:"ui label"},n.props.label.replace("_"," ")),loading:!1},n}return a(t,e),p(t,[{key:"shouldComponentUpdate",value:function(e,t){return t!==this.state||!e.value||e.value!==this.props.value}},{key:"onValueChange",value:function(e){this.props.onChange(e.target.name,e.target.value)}},{key:"getPlaceHolder",value:function(e,t){return""==e?t:e||t}}]),t}(s.a.Component),y=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),p(t,[{key:"render",value:function(){var e=this.props.label.replace(/---/g,"");return s.a.createElement("div",{className:"input-"+f.ADMIN_COMMENT},s.a.createElement("h4",{className:"ui horizontal divider"},e))}}]),t}(s.a.Component),m=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=Object.assign(n.state||{},{enableLongText:!1}),n.onReadOnlyClick=n.onReadOnlyClick.bind(n),n}return a(t,e),p(t,[{key:"onReadOnlyClick",value:function(){this.setState({enableLongText:!0})}},{key:"render",value:function(){var e=parseInt(this.props.option),t=this.getPlaceHolder(this.props.masterValue,"");if(!this.state.enableLongText&&this.props.value&&this.props.value.length>5e3){var n=this.props.value.substring(0,5e3);return s.a.createElement("li",{className:"input-"+f.TEXT},s.a.createElement("div",{className:"ui fluid labeled input"},this.state.label,s.a.createElement("textarea",{onClick:this.onReadOnlyClick,readOnly:"readOnly",defaultValue:n+"\n\n[ -- "+(this.props.value.length-5e3)+" characters trimmed -- ]\n[ -- Click to load full text -- ]"})))}var r=e>64||e<=0?s.a.createElement("textarea",{onChange:this.onValueChange,name:this.state.key,value:this.props.value||"",placeholder:t}):s.a.createElement("input",{onChange:this.onValueChange,type:"text",name:this.state.key,value:this.props.value||"",placeholder:t});return s.a.createElement("li",{className:"input-"+f.TEXT},s.a.createElement("div",{className:"ui fluid labeled input"},this.state.label,r))}}]),t}(d),v=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),p(t,[{key:"render",value:function(){var e=this.getPlaceHolder(this.props.masterValue,""),t=Object.assign({},this.props);return delete t.masterValue,delete t.option,s.a.createElement("li",{className:"input-"+this.props.htmlType},s.a.createElement("div",{className:"ui fluid labeled input"},this.state.label,s.a.createElement("input",l({},t,{onChange:this.onValueChange,name:this.state.key,value:this.props.value||"",placeholder:e}))))}}]),t}(d),b=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),p(t,[{key:"render",value:function(){var e=this.getPlaceHolder(this.props.masterValue[1],"Label"),t=this.getPlaceHolder(this.props.masterValue[2],"http://");return s.a.createElement("li",{className:"input-"+f.LINK},s.a.createElement("div",{className:"ui fluid labeled icon input"},this.state.label,s.a.createElement("span",{className:"ui left icon input"},s.a.createElement("i",{className:"font icon"}),s.a.createElement("input",{type:"text",onChange:this.onValueChange,name:this.state.key+"_1",value:this.props.value[1]||"",placeholder:e})),s.a.createElement("span",{className:"ui left icon input"},s.a.createElement("i",{className:"linkify icon"}),s.a.createElement("input",{type:"text",onChange:this.onValueChange,name:this.state.key+"_2",value:this.props.value[2]||"",placeholder:t}))))}}]),t}(d),g=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=l({},n.state,{fileData:"",progress:0,uploadedPath:"",urlBase:document.body.getAttribute("data-base")}),n.onFileSelect=n.onFileSelect.bind(n),n.onUpload=n.onUpload.bind(n),n.onTransferComplete=n.onTransferComplete.bind(n),n.onUploadProgress=n.onUploadProgress.bind(n),n}return a(t,e),p(t,[{key:"shouldComponentUpdate",value:function(e,n){return n!==this.state||c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e,n)}},{key:"onFileSelect",value:function(){var e=this,t=this.refs.file;if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(t){e.setState({fileData:t.target.result}),e.onUpload()},n.readAsDataURL(t.files[0])}}},{key:"onUploadProgress",value:function(e){if(e.lengthComputable){var t=Math.floor(e.loaded/e.total*100);this.setState({progress:t})}}},{key:"onTransferComplete",value:function(e){var t=e.target.response;"success"===t.status?(this.setState({loading:!1,progress:100,uploadedPath:t.url}),this.props.onChange(this.state.key,t.url)):(this.setState({loading:!1,progress:0,uploadedPath:"",fileData:""}),console.log("upload Error"))}},{key:"onUpload",value:function(){var e=new FormData;e.append("file",this.refs.file.files[0]);var t=new XMLHttpRequest;t.responseType="json",t.addEventListener("load",this.onTransferComplete),t.upload.addEventListener("progress",this.onUploadProgress),t.open("POST",this.state.urlBase+"admin/page/upload.json"),t.send(e),this.setState({loading:!0})}},{key:"render",value:function(){var e=this.getPlaceHolder(this.props.masterValue[0],"File"),t=this.getPlaceHolder(this.props.masterValue[1],"Label"),n=null;return n=null===this.props.value[0]||""===this.props.value[0]?s.a.createElement("span",{className:"ui input file"},s.a.createElement("input",{type:"file",name:"file-"+this.state.key,ref:"file",onChange:this.onFileSelect})):this.state.progress>0&&this.state.progress<100?s.a.createElement("span",null,this.state.progress):s.a.createElement("span",null,s.a.createElement("div",{className:"ui input left icon"},s.a.createElement("i",{className:"icon file outline"}),s.a.createElement("input",{type:"text",onChange:this.onValueChange,name:this.state.key,value:this.props.value[0]||"",placeholder:e})),s.a.createElement("div",{className:"ui input left icon"},s.a.createElement("i",{className:"icon font"}),s.a.createElement("input",{type:"text",className:"label-text",onChange:this.onValueChange,name:this.state.key+"_1",value:this.props.value[1]||"",placeholder:t}))),s.a.createElement("li",{className:"input-"+f.FILE},s.a.createElement("div",{className:"ui labeled input"},this.state.label),n)}}]),t}(d),_=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),p(t,[{key:"render",value:function(){var e=this.getPlaceHolder(this.props.masterValue[0],"File"),t=this.getPlaceHolder(this.props.masterValue[1],"alt"),n=this.getPlaceHolder(this.props.masterValue[2],"crop"),r=null,a=""===this.props.value[0]?null:this.props.value[0],o=a||this.props.masterValue[0]||"",i=""!==o?s.a.createElement("div",{className:"thumbnail",style:{backgroundImage:"url("+this.state.urlBase+"imagefly/w100/media/upload/"+o+")"}}):null;return r=void 0===this.props.value[0]||""===this.props.value[0]?s.a.createElement("span",null,s.a.createElement("div",{className:"ui input file"},s.a.createElement("input",{type:"file",name:"file-"+this.state.key,ref:"file",onChange:this.onFileSelect})),i):this.state.progress>0&&this.state.progress<100?s.a.createElement("span",null,this.state.progress):s.a.createElement("span",null,s.a.createElement("div",{className:"ui input left icon"},s.a.createElement("i",{className:"icon file image outline"}),s.a.createElement("input",{className:"pic-url",type:"text",onChange:this.onValueChange,name:this.state.key,value:this.props.value[0]||"",placeholder:e})),s.a.createElement("div",{className:"ui input left icon"},s.a.createElement("i",{className:"icon universal access"}),s.a.createElement("input",{className:"alt-text",type:"text",onChange:this.onValueChange,name:this.state.key+"_1",value:this.props.value[1]||"",placeholder:t})),s.a.createElement("div",{className:"ui input left icon"},s.a.createElement("i",{className:"icon crop"}),s.a.createElement("input",{className:"crop-setting",type:"text",onChange:this.onValueChange,name:this.state.key+"_2",value:this.props.value[2]||"",placeholder:n})),i),s.a.createElement("li",{className:"input-"+f.FILE},s.a.createElement("div",{className:"ui labeled input"},this.state.label),r)}}]),t}(g),E=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refreshDropdown=n.refreshDropdown.bind(n),n}return a(t,e),p(t,[{key:"refreshDropdown",value:function(e,t){var n=this;$(e).dropdown({onChange:function(e){n.props.onChange(t,e)}})}},{key:"componentDidMount",value:function(){this.refreshDropdown()}},{key:"componentDidUpdate",value:function(){this.refreshDropdown()}},{key:"render",value:function(){var e=this,t=this.props.option.split(",").map(function(e){if(/\:/.test(e)){var t=e.split(":");return s.a.createElement("div",{className:"item","data-value":t[0],key:e},t[1])}return s.a.createElement("div",{className:"item","data-value":e,key:e},e)});return s.a.createElement("li",{className:"input-"+f.ENUM},s.a.createElement("div",{className:"ui selection dropdown fluid",name:this.state.key,ref:function(t){return e.refreshDropdown(t,e.state.key)}},s.a.createElement("input",{type:"hidden",name:this.state.key,value:this.props.value||""}),s.a.createElement("i",{className:"dropdown icon"}),s.a.createElement("div",{className:"default text"},this.props.label),s.a.createElement("div",{className:"menu"},t)))}}]),t}(d),O=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),p(t,[{key:"render",value:function(){return s.a.createElement("li",{className:"input-unknown"},s.a.createElement("div",null,"not implement : ",this.props.type))}}]),t}(d),w=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),p(t,[{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"render",value:function(){var e=this,t=this.props.masterValues["count"+this.props.id]||1;t=parseInt(t);for(var r=[],a=0;a<t;a++)!function(t){var a=e.props.id+"("+t+")",o=n.i(u.fromJS)(e.props.option),i=o.map(function(e){return e.set("id",a+"_"+e.get("id")).toJSON()}),c=i.map(function(t){return h.renderField(e.props.prefix,t,e.props.values,e.props.masterValues,e.props.onChange)});r[t]=s.a.createElement("li",{key:"group"+t,draggable:"true",className:"wide"},s.a.createElement("div",{className:"ui segment"},s.a.createElement("div",{className:"ui top left attached label theme"},e.state.key+"("+t+")"),s.a.createElement("ul",{className:"box"},c)))}(a);return s.a.createElement("li",{className:"input-"+f.GROUP},s.a.createElement("div",{className:"ui segment"},s.a.createElement("div",{className:"ui ribbon label teal"},this.props.label),s.a.createElement("div",{className:"ui input labeled"},s.a.createElement("div",{className:"ui label"},"count:"),s.a.createElement("input",{type:"number",name:"count"+this.props.id,min:"1",value:this.props.masterValues["count"+this.props.id]||1,onChange:this.onValueChange})),s.a.createElement("ul",{className:"box"},r)))}}]),t}(d),j=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),p(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"ui checkbox"},s.a.createElement("input",{id:this.state.key,name:this.state.key,type:"checkbox",checked:1==this.props.value,onChange:function(t){return e.props.onChange(e.state.key,t.target.checked?"1":"0")}}),s.a.createElement("label",{htmlFor:this.state.key},this.props.label))}}]),t}(d),x=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),p(t,[{key:"render",value:function(){return null}}]),t}(s.a.Component)},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var a=n(81),o=n(82),i=n(83),s=n(84),u=n(85);r.prototype.clear=a,r.prototype.delete=o,r.prototype.get=i,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(a(e[n][0],t))return n;return-1}var a=n(23);e.exports=r},function(e,t,n){function r(e){return null==e?void 0===e?u:s:c&&c in Object(e)?o(e):i(e)}var a=n(12),o=n(70),i=n(94),s="[object Null]",u="[object Undefined]",c=a?a.toStringTag:void 0;e.exports=r},function(e,t,n){function r(e,t){var n=e.__data__;return a(t)?n["string"==typeof t?"string":"hash"]:n.map}var a=n(79);e.exports=r},function(e,t,n){var r=n(2),a=r(Object,"create");e.exports=a},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){var r=n(2),a=n(1),o=r(a,"Map");e.exports=o},function(e,t,n){var r=n(1),a=r.Symbol;e.exports=a},function(e,t,n){(function(e){var r=n(1),a=n(108),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o,u=s?r.Buffer:void 0,c=u?u.isBuffer:void 0,l=c||a;e.exports=l}).call(t,n(29)(e))},function(e,t,n){var r=n(62),a=n(64),o=n(93),i=o&&o.isTypedArray,s=i?a(i):r;e.exports=s},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;e({type:h,payload:t}),setTimeout(function(){return e({type:d,payload:t})},n)}function a(e,t,r,a,i){var s=n.i(f.fromJS)(t).toJSON(),u=n.i(f.fromJS)(r).toJSON(),c=n.i(f.fromJS)(e).toJSON();for(var l in s)o(s[l])&&delete s[l];for(var p in u){for(var h in u[p])o(u[p][h])&&delete u[p][h];o(u[p])&&delete u[p]}for(var d in c)o(c[d])&&delete c[d];var y=new FormData,m={page_values:c,field_values:u,page_ext_values:s};y.append("source",JSON.stringify(m)),y.append("campaign",a);for(var v in m.page_values)"pagetype_id"!==v&&"layout_id"!==v&&y.append(v,m.page_values[v]);return y.append("pagetype_id",c.pagetype_id),y.append("layout_id",c.layout_id),y.append("editing_language",i),y}function o(e){return!e||(e.constructor===String?""===e||"http://"===e:e.constructor===Array?0===e.length:e.constructor===Object&&0===Object.keys(e).length)}function i(e,t,n,r,o,i){return function(s){return s({type:y}),p()(e,{credentials:"same-origin",method:"post",body:a(t,n,r,o,i)}).then(function(e){return e.text()}).then(function(e){s({type:m,payload:e})})}}function s(){return{type:m,payload:""}}function u(e,t,n,o,i,s){return function(u){return u({type:v}),p()(e,{credentials:"same-origin",method:"post",body:a(t,n,o,i,s)}).then(function(e){return e.json()}).then(function(e){"success"===e.status?(r(u,{type:b}),c(u,e.page_id)):console.log(e)})}}function c(e,t){e({type:_,payload:t})}n.d(t,"i",function(){return h}),n.d(t,"k",function(){return d}),t.a=o,n.d(t,"f",function(){return y}),n.d(t,"g",function(){return m}),t.b=i,t.d=s,n.d(t,"j",function(){return b}),t.c=u,n.d(t,"e",function(){return g}),n.d(t,"h",function(){return _});var l=n(44),p=n.n(l),f=n(30),h=(n.n(f),Object.assign,"FLASH_MESSAGE"),d="FLASH_MESSAGE_END",y="LOAD_PREVIEW",m="UPDATE_PREVIEW",v="SAVE_PAGE",b="SAVE_SUCCESS",g="ACTION_CLEAN_FIELDS",_="UPDATE_PAGE_ID"},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var a=n(86),o=n(87),i=n(88),s=n(89),u=n(90);r.prototype.clear=a,r.prototype.delete=o,r.prototype.get=i,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){function r(e){if(!a(e))return o(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}var a=n(21),o=n(92),i=Object.prototype,s=i.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n,r,c,l){var p=n&s,f=e.length,h=t.length;if(f!=h&&!(p&&h>f))return!1;var d=l.get(e);if(d&&l.get(t))return d==t;var y=-1,m=!0,v=n&u?new a:void 0;for(l.set(e,t),l.set(t,e);++y<f;){var b=e[y],g=t[y];if(r)var _=p?r(g,b,y,t,e,l):r(b,g,y,e,t,l);if(void 0!==_){if(_)continue;m=!1;break}if(v){if(!o(t,function(e,t){if(!i(v,t)&&(b===e||c(b,e,n,r,l)))return v.push(t)})){m=!1;break}}else if(b!==g&&!c(b,g,n,r,l)){m=!1;break}}return l.delete(e),l.delete(t),m}var a=n(49),o=n(56),i=n(65),s=1,u=2;e.exports=r},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(110))},function(e,t,n){var r=n(45),a=n(11),o=n(47),i=n(48),s=n(52),u=n(6),c=n(22),l=c(r),p=c(a),f=c(o),h=c(i),d=c(s),y=u;(r&&"[object DataView]"!=y(new r(new ArrayBuffer(1)))||a&&"[object Map]"!=y(new a)||o&&"[object Promise]"!=y(o.resolve())||i&&"[object Set]"!=y(new i)||s&&"[object WeakMap]"!=y(new s))&&(y=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case l:return"[object DataView]";case p:return"[object Map]";case f:return"[object Promise]";case h:return"[object Set]";case d:return"[object WeakMap]"}return t}),e.exports=y},function(e,t){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}var r=Object.prototype;e.exports=n},function(e,t){function n(e){if(null!=e){try{return a.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,a=r.toString;e.exports=n},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){var r=n(58),a=n(10),o=Object.prototype,i=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return a(e)&&i.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},function(e,t,n){function r(e){return null!=e&&o(e.length)&&!a(e)}var a=n(26),o=n(27);e.exports=r},function(e,t,n){function r(e){if(!o(e))return!1;var t=a(e);return t==s||t==u||t==i||t==c}var a=n(6),o=n(28),i="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",c="[object Proxy]";e.exports=r},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=Immutable},function(e,t){e.exports=ReactRedux},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n.n(a),i=n(112),s=n.n(i),u=n(36),c=n(43),l=n(31),p=(n.n(l),n(113)),f=(n.n(p),n(109)),h=n.n(f),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=function(){function e(){r(this,e);var t=this.getDefaultState();this.store=n.i(p.createStore)(n.i(c.a)(t),n.i(p.applyMiddleware)(h.a)),this.render()}return d(e,[{key:"getDefaultState",value:function(){return Object.assign({},{campaign_name:"",campaign_shortname:"",campaign_id:"",languages:["en","tc"],masterLanguage:"en",editingLanguage:"en",city:"",page:{id:null,name:"",shortname:"",publish_start_date:"",publish_end_date:"",parent_id:"",order:1,hide:!1,member:!1,share:!0,pagetype_id:"1",layout_id:"0"},properties:{},fields:{en:{}},pagetype:[],previewSource:"",editTime:this.getEditTime()},window.__PRELOADED_STATE__||{})}},{key:"getEditTime",value:function(){return/#edition\d*:\d+/i.test(window.location.href)?location.href.replace(/[^#]+#edition\d*:(\d+)/i,"$1"):Date.now()}},{key:"render",value:function(){s.a.render(o.a.createElement(l.Provider,{store:this.store},o.a.createElement(u.a,null)),document.getElementById("root"))}}]),e}();t.default=y,new y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(104),s=n.n(i),u=n(105),c=n.n(u),l=n(0),p=n.n(l),f=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),d(t,[{key:"serialize",value:function(e,t){var n=[],r=void 0;for(r in e)if(e.hasOwnProperty(r)){var a=t?t+"["+r+"]":r,o=e[r];n.push(null!==o&&"object"===(void 0===o?"undefined":h(o))?this.serialize(o,a):encodeURIComponent(a)+"="+encodeURIComponent(o))}return n.join("&")}},{key:"deserialize",value:function(e){var t={};return e&&e.slice(1).split("&").map(function(e){var n=e.split("="),r=f(n,2),a=r[0],o=r[1];o&&(t[a]=o)}),t}},{key:"isURLMatch",value:function(){return location.pathname.replace(/\/$/i,"")===this.getPath()&&c()(this.props.query,this.deserialize(location.search))&&location.hash.replace(/^#/i,"")===this.props.fragment}},{key:"getPath",value:function(){return this.props.path.replace(/\/$/i,"")}},{key:"getQuery",value:function(){return s()(this.props.query)?"":"?"+this.serialize(this.props.query)}},{key:"getFragment",value:function(){return s()(this.props.fragment)?"":"#"+this.props.fragment}},{key:"render",value:function(){return this.isURLMatch()||window.history.replaceState({},"",""+(this.getPath()+this.getQuery()+this.getFragment())),null}}]),t}(p.a.Component);t.a=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.urlBase=document.body.getAttribute("data-base"),n.state={update:0},n.stateSize=0;var o=JSON.parse(localStorage.getItem(n.props.currentEdition));return o&&n.props.onLoadState(o),n}return o(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){e.currentEdition!==this.props.currentEdition&&this.onDelete(this.props.currentEdition);var t=JSON.stringify(e.state);if(this.stateSize=t.length,!(t.length>1e5))try{localStorage.setItem(e.currentEdition,t)}catch(e){alert(e)}}},{key:"onDelete",value:function(e){localStorage.removeItem(e),this.setState({update:this.state.update++})}},{key:"render",value:function(){var e=this,t=new RegExp("edition"+this.props.pageId+":","i"),n=Object.keys(localStorage).filter(function(e){return/edition\d*:\d+/i.test(e)}),r=n.map(function(n){return t.test(n)?s.a.createElement("li",{key:n},s.a.createElement("a",{href:e.urlBase+"admin/page/edit/"+e.props.pageId+"?campaign="+e.props.campaignId+"&r="+Math.floor(1e4*Math.random())+"#"+n},n+" "+(n===e.props.currentEdition?"(current)":"")+" "),n===e.props.currentEdition?null:s.a.createElement("span",{className:"link delete",onClick:function(){return e.onDelete(n)}},s.a.createElement("i",{className:"ui icon delete"}))):null});return s.a.createElement("div",null,s.a.createElement("h4",null,s.a.createElement("i",{className:"ui icon save"}),"Auto Save:"),this.stateSize<1e5?null:s.a.createElement("div",null,"This page is too large for auto save."),s.a.createElement("ul",null,r))}}]),t}(s.a.Component);t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSave=n.onSave.bind(n),n.preview=n.preview.bind(n),n}return o(t,e),u(t,[{key:"onSave",value:function(){this.props.onSave()}},{key:"preview",value:function(){this.props.onPreview()}},{key:"render",value:function(){if(!1===this.props.enabled)return s.a.createElement("div",null,"Undefined Page Type. Please select an page type.");var e="ui button"+(this.props.isLoading?" loading":"");return s.a.createElement("div",{id:"page-controls"},s.a.createElement("button",{className:e+" grey",onClick:this.preview},"Preview"),s.a.createElement("button",{className:e+" black",onClick:this.onSave},"Save"),this.props.justSaved?s.a.createElement("i",{className:"ui icon checkmark"}):null)}}]),t}(s.a.Component);t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=n(31),c=(n.n(u),n(38)),l=n(42),p=n(39),f=n(41),h=n(37),d=n(35),y=n(40),m=n(34),v=n(33),b=n(15),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hugeFile:!1,urlBase:document.body.getAttribute("data-base")},n.onPreview=n.onPreview.bind(n),n.onSave=n.onSave.bind(n),n}return o(t,e),_(t,[{key:"onPreview",value:function(){var e=this.state.urlBase+"page/admin_preview"+(""===this.props.page.id?"":"/"+this.props.page.id);this.props.onPreview(e,this.props.page,this.props.properties,this.props.fields,this.props.campaignId,this.props.editingLanguage)}},{key:"onSave",value:function(){var e=this.state.urlBase+"admin/page/save"+(""===this.props.page.id?"":"/"+this.props.page.id)+".json";this.props.onSave(e,this.props.page,this.props.properties,this.props.fields,this.props.campaignId,this.props.editingLanguage)}},{key:"render",value:function(){for(var e=void 0,t=void 0,r=0;r<this.props.pagetype.length;r++){var a=this.props.pagetype[r];if(a.id===this.props.page.pagetype_id){e=a.properties,t=a.fields;break}}var o=Object.assign({},this.props.fields[this.props.editingLanguage]),i=Object.assign({},this.props.fields[this.props.masterLanguage]);if(""!==this.props.previewSource)return s.a.createElement("div",null,s.a.createElement("div",{className:"ui segment"},s.a.createElement("div",{className:"ui button",onClick:this.props.clearPreview},"Close Preview")),s.a.createElement(y.a,{source:this.props.previewSource}));var u=this.props.city+"_"+this.props.editingLanguage+"/"+this.props.campaignShortName+"/"+this.props.page.shortname;return s.a.createElement("div",null,s.a.createElement(v.a,{path:this.state.urlBase+"admin/page/edit/"+this.props.page.id,query:{campaign:this.props.campaignId},fragment:"edition"+this.props.page.id+":"+this.props.editTime}),s.a.createElement("div",{className:"ui form"},s.a.createElement("div",{className:"ui segment inverted theme"},s.a.createElement("h1",null,this.props.campaignName),""===this.props.page.shortname?s.a.createElement("div",null," "):s.a.createElement("div",null,s.a.createElement("a",{className:"preview-link",href:u,target:"_blank"},u))),s.a.createElement("div",{id:"page-content",className:"column"},s.a.createElement(f.a,{languages:this.props.languages,master:this.props.masterLanguage,current:this.props.editingLanguage,onChange:this.props.onLanguageChange}),s.a.createElement(h.a,{scheme:t,values:o,masterValues:i,prefix:"field",onChange:this.props.onInputChange}),s.a.createElement(d.a,{onPreview:this.onPreview,onSave:this.onSave,justSaved:this.props.justSaved})),s.a.createElement("div",{id:"page-setting",className:"column"},s.a.createElement("div",{className:"ui stacked segment inverted"},s.a.createElement("h3",null,s.a.createElement("i",{className:"icon setting"}),"Settings"),s.a.createElement("div",{id:"page-info"},s.a.createElement(l.a,{scheme:this.props.pagetype,selectedType:this.props.page.pagetype_id,selectedLayout:this.props.page.layout_id,onChange:this.props.onInputChange}),s.a.createElement(c.a,{campaignName:this.props.campaignName,page:this.props.page,onChange:this.props.onInputChange}))),s.a.createElement(p.a,{scheme:this.props.pagetype,selectedType:this.props.page.pagetype_id,selectedLayout:this.props.page.layout_id,onChange:this.props.onInputChange}),n.i(b.a)(e)?null:s.a.createElement("div",{className:"ui segment"},s.a.createElement("h4",null,s.a.createElement("i",{className:"icon setting"}),"Additional Settings"),s.a.createElement(h.a,{scheme:e,values:this.props.properties,prefix:"prop",onChange:this.props.onInputChange})),s.a.createElement("div",{className:"ui segment"},s.a.createElement(m.a,{campaignId:this.props.campaignId,pageId:this.props.page.id,currentEdition:"edition"+this.props.page.id+":"+this.props.editTime,state:this.props.state,onLoadState:this.props.onLoadState}),s.a.createElement("h5",null,"TODO:"),s.a.createElement("ul",null,s.a.createElement("li",null,"Ordering of group items"),s.a.createElement("li",null,"Image crop"),s.a.createElement("li",null,"check other user editing same page"))))))}}]),t}(s.a.Component);t.a=n.i(u.connect)(function(e){return g({},e,{campaignName:e.campaign_name,campaignId:e.campaign_id,campaignShortName:e.campaign_shortname,sessionId:e.session_id,state:e})},function(e){return{onInputChange:function(t,n,r){switch(r){case"field":e({type:"CHANGE_FIELD_INPUT",payload:{name:t,value:n}});break;case"prop":e({type:"CHANGE_PROPERTIES_INPUT",payload:{name:t,value:n}});break;default:e({type:"CHANGE_PAGE_SETTING",payload:{name:t,value:n}})}},onLanguageChange:function(t){return e({type:"CHANGE_EDITING_LANGUAGE",payload:t})},onPreview:function(t,r,a,o,i,s){return e(n.i(b.b)(t,r,a,o,i,s))},onSave:function(t,r,a,o,i,s){return e(n.i(b.c)(t,r,a,o,i,s))},onCleanField:function(){return e({type:"CLEAN_FIELDS",payload:""})},onLoadState:function(t){return e({type:"LOAD_STATE",payload:t})},clearPreview:function(){return e(n.i(b.d)())}}})(E)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=n(3),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=n.onChange.bind(n),n}return o(t,e),c(t,[{key:"onChange",value:function(e,t){this.props.onChange(e,t,this.props.prefix)}},{key:"render",value:function(){var e=this,t=Object.assign({},this.props.values),n=this.props.masterValues||this.props.values,r=this.props.scheme&&this.props.scheme.map(function(r){return u.b.renderField(e.props.prefix,r,t,n,e.onChange)});return s.a.createElement("ul",{className:"box page-fields"},r)}}]),t}(s.a.Component);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=n(3),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=n.onChange.bind(n),n.scheme=[{id:"name",name:"Name",type:u.a.DISABLE,option:"64"},{id:"shortname",name:"URL",type:u.a.TEXT,option:"64"},{id:"parent_id",name:"Parent Page",type:u.a.DISABLE,option:"64"},{id:"publish_start_date",name:"Publish Date",type:u.a.DATE,option:""},{id:"publish_end_date",name:"Expire Date",type:u.a.DATE,option:""},{id:"hide",name:"Hide",type:u.a.BOOLEAN,option:""},{id:"share",name:"Allow Share",type:u.a.BOOLEAN,option:""},{id:"member",name:"Members Only",type:u.a.BOOLEAN,option:""}],n}return o(t,e),c(t,[{key:"onChange",value:function(e,t){this.props.onChange(e,t,"")}},{key:"render",value:function(){var e=this,t={name:this.props.page.name,shortname:this.props.page.shortname,parent_id:this.props.page.parent_id,publish_start_date:this.props.page.publish_start_date,publish_end_date:this.props.page.publish_end_date,hide:this.props.page.hide||0,share:this.props.page.share||1,member:this.props.page.member||0},n=this.scheme.map(function(n){return u.b.renderField("",n,t,t,e.onChange)});return s.a.createElement("ul",{className:"box"},n)}}]),t}(s.a.Component);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=n(3),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=n.props.scheme.map(function(e){return e.id+":"+e.name});return n.scheme=[{id:"pagetype_id",name:"Type",type:u.a.ENUM,option:o.join(",")}],n.onChange=n.onChange.bind(n),n}return o(t,e),c(t,[{key:"onChange",value:function(e,t){""===t&&(t=0),this.props.onChange(e,t,"")}},{key:"render",value:function(){var e=this,t={};this.props.scheme.forEach(function(e){return t["type"+e.id]=parseInt(e.layout_count)});var n=t["type"+this.props.selectedType];return null===this.props.selectedLayout||n<=1?null:s.a.createElement("div",{className:"ui segment inverted"},s.a.createElement("h4",null,s.a.createElement("i",{className:"icon setting"}),"Page Style Settings"),s.a.createElement("div",null,s.a.createElement("div",{className:"ui input labeled"},s.a.createElement("div",{className:"ui label"},"Layout"),s.a.createElement("input",{type:"number",min:"0",max:n-1,value:this.props.selectedLayout,onChange:function(t){return e.onChange("layout_id",t.target.value)}}))))}}]),t}(s.a.Component);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"render",value:function(){var e=this;return""===this.props.source?null:s.a.createElement("div",null,s.a.createElement("iframe",{id:"page-preview",ref:function(t){return t&&t.contentWindow.document.write(e.props.source)}}))}}]),t}(s.a.Component);t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"onClick",value:function(e){this.props.onChange(e)}},{key:"render",value:function(){var e=this,t=this.props.languages.map(function(t){var n=[];return t==e.props.master&&n.push("master"),t==e.props.current&&n.push("active"),s.a.createElement("li",{key:t,className:n.join(" "),onClick:function(){return e.onClick(t)}},t)});return s.a.createElement("div",{id:"translations"},s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"ui right pointing label inverted theme"},"Translations")),s.a.createElement("div",{className:"column"},s.a.createElement("ul",{className:"box"},t)))}}]),t}(s.a.Component);t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=n(3),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=n.props.scheme.map(function(e){return e.id+":"+e.name});return n.scheme=[{id:"pagetype_id",name:"Type",type:u.a.ENUM,option:o.join(",")}],n.onChange=n.onChange.bind(n),n}return o(t,e),c(t,[{key:"onChange",value:function(e,t){""===t&&(t=0),this.props.onChange(e,t,"")}},{key:"render",value:function(){var e=this,t={pagetype_id:this.props.selectedType,layout_id:this.props.selectedLayout||0},n=this.scheme.map(function(n){return u.b.renderField("",n,t,t,e.onChange)}),r={};return this.props.scheme.forEach(function(e){return r["type"+e.id]=parseInt(e.layout_count)}),s.a.createElement("ul",{className:"box"},n)}}]),t}(s.a.Component);t.a=l},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments[1];switch(n.type){case"HOT_RELOAD":return i({},t,{hmr:Math.random()});case"CHANGE_EDITING_LANGUAGE":return t.editingLanguage===n.pagetype?t:i({},t,{editingLanguage:n.payload});case"CHANGE_FIELD_INPUT":if((t.fields[t.editingLanguage]&&t.fields[t.editingLanguage][n.payload.name])===n.payload.value)return t;if(0===n.payload.name.indexOf("field")){var r=a(t,t.editingLanguage,n.payload.name,n.payload.value);return Object.assign({},t,r)}if(0===n.payload.name.indexOf("count")){var s=a(t,t.masterLanguage,n.payload.name,n.payload.value);return Object.assign({},t,s)}return t;case"CHANGE_PROPERTIES_INPUT":if(t.properties[n.payload.name]===n.payload.value)return t;var u=Object.assign({},t.properties);return u[n.payload.name]=n.payload.value,i({},t,{properties:u});case"CHANGE_PAGE_SETTING":if(t.page[n.payload.name]===n.payload.value)return t;var c=Object.assign({},t);return c.page[n.payload.name]=n.payload.value,"pagetype_id"===n.payload.name&&(c.page.layout_id=c.page.layout_id||"0"),c;case o.e:case"LOAD_STATE":return n.payload;case o.f:return t;case o.g:return i({},t,{previewSource:n.payload});case o.h:return t.page.id===n.payload?t:i({},t,{page:i({},t.page,{id:n.payload})});case o.i:switch(n.payload.type){case o.j:return i({},t,{justSaved:!0});default:return t}case o.k:switch(n.payload.type){case o.j:return i({},t,{justSaved:!1});default:return t}default:return t}}}function a(e,t,n,r){var a=Object.assign({},e.fields[t]);a[n]=r,""===r&&delete a[n];var o=Object.assign({},e.fields);return o[t]=a,{fields:o}}t.a=r;var o=n(15),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){n(111),e.exports=self.fetch.bind(self)},function(e,t,n){var r=n(2),a=n(1),o=r(a,"DataView");e.exports=o},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var a=n(73),o=n(74),i=n(75),s=n(76),u=n(77);r.prototype.clear=a,r.prototype.delete=o,r.prototype.get=i,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){var r=n(2),a=n(1),o=r(a,"Promise");e.exports=o},function(e,t,n){var r=n(2),a=n(1),o=r(a,"Set");e.exports=o},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new a;++t<n;)this.add(e[t])}var a=n(16),o=n(96),i=n(97);r.prototype.add=r.prototype.push=o,r.prototype.has=i,e.exports=r},function(e,t,n){function r(e){var t=this.__data__=new a(e);this.size=t.size}var a=n(4),o=n(99),i=n(100),s=n(101),u=n(102),c=n(103);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=s,r.prototype.has=u,r.prototype.set=c,e.exports=r},function(e,t,n){var r=n(1),a=r.Uint8Array;e.exports=a},function(e,t,n){var r=n(2),a=n(1),o=r(a,"WeakMap");e.exports=o},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,a=0,o=[];++n<r;){var i=e[n];t(i,n,e)&&(o[a++]=i)}return o}e.exports=n},function(e,t,n){function r(e,t){var n=i(e),r=!n&&o(e),l=!n&&!r&&s(e),f=!n&&!r&&!l&&c(e),h=n||r||l||f,d=h?a(e.length,String):[],y=d.length;for(var m in e)!t&&!p.call(e,m)||h&&("length"==m||l&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||u(m,y))||d.push(m);return d}var a=n(63),o=n(24),i=n(9),s=n(13),u=n(78),c=n(14),l=Object.prototype,p=l.hasOwnProperty;e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t,n){function r(e,t,n){var r=t(e);return o(e)?r:a(r,n(e))}var a=n(55),o=n(9);e.exports=r},function(e,t,n){function r(e){return o(e)&&a(e)==i}var a=n(6),o=n(10),i="[object Arguments]";e.exports=r},function(e,t,n){function r(e,t,n,i,s){return e===t||(null==e||null==t||!o(e)&&!o(t)?e!==e&&t!==t:a(e,t,n,i,r,s))}var a=n(60),o=n(10);e.exports=r},function(e,t,n){function r(e,t,n,r,m,b){var g=c(e),_=c(t),E=g?d:u(e),O=_?d:u(t);E=E==h?y:E,O=O==h?y:O;var w=E==y,j=O==y,x=E==O;if(x&&l(e)){if(!l(t))return!1;g=!0,w=!1}if(x&&!w)return b||(b=new a),g||p(e)?o(e,t,n,r,m,b):i(e,t,E,n,r,m,b);if(!(n&f)){var P=w&&v.call(e,"__wrapped__"),N=j&&v.call(t,"__wrapped__");if(P||N){var S=P?e.value():e,C=N?t.value():t;return b||(b=new a),m(S,C,n,r,b)}}return!!x&&(b||(b=new a),s(e,t,n,r,m,b))}var a=n(50),o=n(18),i=n(67),s=n(68),u=n(20),c=n(9),l=n(13),p=n(14),f=1,h="[object Arguments]",d="[object Array]",y="[object Object]",m=Object.prototype,v=m.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){return!(!i(e)||o(e))&&(a(e)?d:c).test(s(e))}var a=n(26),o=n(80),i=n(28),s=n(22),u=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,l=Function.prototype,p=Object.prototype,f=l.toString,h=p.hasOwnProperty,d=RegExp("^"+f.call(h).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t,n){function r(e){return i(e)&&o(e.length)&&!!s[a(e)]}var a=n(6),o=n(27),i=n(10),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t){function n(e,t){return e.has(t)}e.exports=n},function(e,t,n){var r=n(1),a=r["__core-js_shared__"];e.exports=a},function(e,t,n){function r(e,t,n,r,a,w,x){switch(n){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case E:return!(e.byteLength!=t.byteLength||!w(new o(e),new o(t)));case f:case h:case m:return i(+e,+t);case d:return e.name==t.name&&e.message==t.message;case v:case g:return e==t+"";case y:var P=u;case b:var N=r&l;if(P||(P=c),e.size!=t.size&&!N)return!1;var S=x.get(e);if(S)return S==t;r|=p,x.set(e,t);var C=s(P(e),P(t),r,a,w,x);return x.delete(e),C;case _:if(j)return j.call(e)==j.call(t)}return!1}var a=n(12),o=n(51),i=n(23),s=n(18),u=n(91),c=n(98),l=1,p=2,f="[object Boolean]",h="[object Date]",d="[object Error]",y="[object Map]",m="[object Number]",v="[object RegExp]",b="[object Set]",g="[object String]",_="[object Symbol]",E="[object ArrayBuffer]",O="[object DataView]",w=a?a.prototype:void 0,j=w?w.valueOf:void 0;e.exports=r},function(e,t,n){function r(e,t,n,r,i,u){var c=n&o,l=a(e),p=l.length;if(p!=a(t).length&&!c)return!1;for(var f=p;f--;){var h=l[f];if(!(c?h in t:s.call(t,h)))return!1}var d=u.get(e);if(d&&u.get(t))return d==t;var y=!0;u.set(e,t),u.set(t,e);for(var m=c;++f<p;){h=l[f];var v=e[h],b=t[h];if(r)var g=c?r(b,v,h,t,e,u):r(v,b,h,e,t,u);if(!(void 0===g?v===b||i(v,b,n,r,u):g)){y=!1;break}m||(m="constructor"==h)}if(y&&!m){var _=e.constructor,E=t.constructor;_!=E&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof E&&E instanceof E)&&(y=!1)}return u.delete(e),u.delete(t),y}var a=n(69),o=1,i=Object.prototype,s=i.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){return a(e,i,o)}var a=n(57),o=n(71),i=n(106);e.exports=r},function(e,t,n){function r(e){var t=i.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var a=s.call(e);return r&&(t?e[u]=n:delete e[u]),a}var a=n(12),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,u=a?a.toStringTag:void 0;e.exports=r},function(e,t,n){var r=n(53),a=n(107),o=Object.prototype,i=o.propertyIsEnumerable,s=Object.getOwnPropertySymbols,u=s?function(e){return null==e?[]:(e=Object(e),r(s(e),function(t){return i.call(e,t)}))}:a;e.exports=u},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function r(){this.__data__=a?a(null):{},this.size=0}var a=n(8);e.exports=r},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function r(e){var t=this.__data__;if(a){var n=t[e];return n===o?void 0:n}return s.call(t,e)?t[e]:void 0}var a=n(8),o="__lodash_hash_undefined__",i=Object.prototype,s=i.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=this.__data__;return a?void 0!==t[e]:i.call(t,e)}var a=n(8),o=Object.prototype,i=o.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=a&&void 0===t?o:t,this}var a=n(8),o="__lodash_hash_undefined__";e.exports=r},function(e,t){function n(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||a.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,a=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function r(e){return!!o&&o in e}var a=n(66),o=function(){var e=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=a(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}var a=n(5),o=Array.prototype,i=o.splice;e.exports=r},function(e,t,n){function r(e){var t=this.__data__,n=a(t,e);return n<0?void 0:t[n][1]}var a=n(5);e.exports=r},function(e,t,n){function r(e){return a(this.__data__,e)>-1}var a=n(5);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__,r=a(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var a=n(5);e.exports=r},function(e,t,n){function r(){this.size=0,this.__data__={hash:new a,map:new(i||o),string:new a}}var a=n(46),o=n(4),i=n(11);e.exports=r},function(e,t,n){function r(e){var t=a(this,e).delete(e);return this.size-=t?1:0,t}var a=n(7);e.exports=r},function(e,t,n){function r(e){return a(this,e).get(e)}var a=n(7);e.exports=r},function(e,t,n){function r(e){return a(this,e).has(e)}var a=n(7);e.exports=r},function(e,t,n){function r(e,t){var n=a(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var a=n(7);e.exports=r},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}e.exports=n},function(e,t,n){var r=n(95),a=r(Object.keys,Object);e.exports=a},function(e,t,n){(function(e){var r=n(19),a="object"==typeof t&&t&&!t.nodeType&&t,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,i=o&&o.exports===a,s=i&&r.process,u=function(){try{return s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=u}).call(t,n(29)(e))},function(e,t){function n(e){return a.call(e)}var r=Object.prototype,a=r.toString;e.exports=n},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t){function n(e){return this.__data__.set(e,r),this}var r="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function r(){this.__data__=new a,this.size=0}var a=n(4);e.exports=r},function(e,t){function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function r(e,t){var n=this.__data__;if(n instanceof a){var r=n.__data__;if(!o||r.length<s-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(r)}return n.set(e,t),this.size=n.size,this}var a=n(4),o=n(11),i=n(16),s=200;e.exports=r},function(e,t,n){function r(e){if(null==e)return!0;if(u(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||p(e)||i(e)))return!e.length;var t=o(e);if(t==f||t==h)return!e.size;if(l(e))return!a(e).length;for(var n in e)if(y.call(e,n))return!1;return!0}var a=n(17),o=n(20),i=n(24),s=n(9),u=n(25),c=n(13),l=n(21),p=n(14),f="[object Map]",h="[object Set]",d=Object.prototype,y=d.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){return a(e,t)}var a=n(59);e.exports=r},function(e,t,n){function r(e){return i(e)?a(e):o(e)}var a=n(54),o=n(17),i=n(25);e.exports=r},function(e,t){function n(){return[]}e.exports=n},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(a){return"function"==typeof a?a(n,r,e):t(a)}}}}t.__esModule=!0;var a=r();a.withExtraArgument=r,t.default=a},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return v.iterable&&(t[Symbol.iterator]=function(){return t}),t}function a(e){this.map={},e instanceof a?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function i(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=i(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=i(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(v.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(v.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(v.arrayBuffer&&v.blob&&g(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!_(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return E.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new a(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new a(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),a=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(a))}}),t}function y(e){var t=new a;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var a=n.join(":").trim();t.append(r,a)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new a(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var v={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(v.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(e){return e&&DataView.prototype.isPrototypeOf(e)},_=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};a.prototype.append=function(e,r){e=t(e),r=n(r);var a=this.map[e];this.map[e]=a?a+","+r:r},a.prototype.delete=function(e){delete this.map[t(e)]},a.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},a.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},a.prototype.set=function(e,r){this.map[t(e)]=n(r)},a.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},a.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},a.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},a.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},v.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},p.call(h.prototype),p.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var O=[301,302,303,307,308];m.redirect=function(e,t){if(-1===O.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=a,e.Request=h,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,r){var a=new h(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:y(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new m(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(a.method,a.url,!0),"include"===a.credentials&&(o.withCredentials=!0),"responseType"in o&&v.blob&&(o.responseType="blob"),a.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send(void 0===a._bodyInit?null:a._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t){e.exports=ReactDOM},function(e,t){e.exports=Redux},function(e,t,n){e.exports=n(32)}]);